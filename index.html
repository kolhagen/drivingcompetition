<!DOCTYPE html>
<html>
<head>
	<title>Driving Competition</title>

	<script src="build/react.js"></script>
	<script src="build/JSXTransformer.js"></script>
	<script src="build/jquery-2.1.4.min.js"></script>

	<script src="templates/driver.js" type="text/jsx"></script>
	<script src="templates/details.js" type="text/jsx"></script>
	<script src="templates/content.js" type="text/jsx"></script>

	<script src="data/driver.js"></script>
</head>
<body>
	<h1>Driving Competition</h1>

	<script>
		var API 			= "https://xs01ac37c9fd2.hana.ondemand.com/sap/vean/v0.1/odata/";
		var PROXY 		= "http://localhost:8080/";
		var USE_PROXY = true;
		var AUTH 			= "S09MSEFHRU46PmxqMzVFT3pGSmgn";

		var URL = API;
		if (USE_PROXY)
			URL = PROXY + URL;

		function apiRequest(request, callback) {
			$.ajax({
				type: 			"GET",
				dataType: 	"json",
				cache: 			true,
				url: 				URL + request + "&$format=json",
				success: 		callback,
				error: 			function(xhr, status, error) {
											// TODO: show error message
											alert(status + " ### " + error);
										},
				beforeSend: function (xhr, settings) {
											xhr.setRequestHeader ("Authorization", "Basic " + AUTH);
										}
			});
		}
	</script>

	<div id="container"></div>

	<script type="text/jsx">
		// TODO: delete test API call (gets all car models)
		/*apiRequest("Vehicle('sap.vean::Vehicle_AllModels')/Children?$select=ID", function(data) {
			for (car of data.d.results) {
				console.log(car.ID);
			}
		});*/

		React.render(
			<Content />,
			document.getElementById("container")
		);
	</script>
</body>
</html>
